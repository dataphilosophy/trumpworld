<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">

    <title>Trump World</title>
    <script type="text/javascript" src="assets/js/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/cytoscape/dist/cytoscape.min.js"></script>
    <!--    <script type="text/javascript" src="assets/js/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"></script>-->
    <script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-cose-bilkent/1.0.5/cytoscape-cose-bilkent.js"></script>
    <script type="text/javascript" src="assets/js/cytoscape-graphml/cytoscape-graphml.js"></script>



    <link href="https://fonts.googleapis.com/css?family=Metrophobic" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link href="assets/css/styles.css" rel="stylesheet" />


</head>

<body>
    <div id="title">The Trump World</div>
    <div id="cy"></div>


    <script type="text/javascript">
        $(function() {

            "use strict";
            var graphP = $.ajax({
                url: 'http://localhost:8888/DataScience/209/W209-Project-TrumpWorld/src/assets/data/trumpworld.graphml',
                type: 'GET',
                dataType: 'text'
            });
            // also get style via ajax
            var styleP = $.ajax({
                url: 'http://localhost:8888/DataScience/209/W209-Project-TrumpWorld/src/assets/cose-bilkent-styles.txt',
                type: 'GET',
                dataType: 'text'
            });

            var layoutOptions = {
                name: 'cose-bilkent',
                // Called on `layoutready`
                ready: function() {},
                // Called on `layoutstop`
                stop: function() {},
                // number of ticks per frame; higher is faster but more jerky
                refresh: 30,
                // Whether to fit the network view after when done
                fit: true,
                // Padding on fit
                padding: 10,
                // Whether to enable incremental mode
                randomize: true,
                // Node repulsion (non overlapping) multiplier
                nodeRepulsion: 10500,
                // Ideal edge (non nested) length
                idealEdgeLength: 50,
                // Divisor to compute edge forces
                edgeElasticity: 0.45,
                // Nesting factor (multiplier) to compute ideal edge length for nested edges
                nestingFactor: 0.1,
                // Gravity force (constant)
                gravity: 0.25,
                // Maximum number of iterations to perform
                numIter: 2500,
                // For enabling tiling
                tile: true,
                // Type of layout animation. The option set is {'during', 'end', false}
                animate: 'end',
                // Represents the amount of the vertical space to put between the zero degree members during the tiling operation(can also be a function)
                tilingPaddingVertical: 10,
                // Represents the amount of the horizontal space to put between the zero degree members during the tiling operation(can also be a function)
                tilingPaddingHorizontal: 10,
                // Gravity range (constant) for compounds
                gravityRangeCompound: 1.5,
                // Gravity force (constant) for compounds
                gravityCompound: 1.0,
                // Gravity range (constant)
                gravityRange: 3.8
            }
            // when both graph export json and style loaded, init cy
            Promise.all([graphP, styleP]).then(initCy);

            function initCy(then) {
                var styleJson = then[1];
                var cy = window.cy = cytoscape({
                    container: document.getElementById('cy'),
                    boxSelectionEnabled: false,
                    autounselectify: true,
                    style: styleJson,
                    motionBlur: true,
                    selectionType: 'single',
                    boxSelectionEnabled: false,
                    ready: function() {
                        this.graphml(then[0]);
                        this.layout(layoutOptions);
                    }

                });

            }

        });

    </script>
</body>

</html>
