<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">

    <title>Trump World</title>
    <script type="text/javascript" src="assets/js/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/cytoscape/dist/cytoscape.min.js"></script>
    <script type="text/javascript" src="assets/js/cytoscape-graphml/cytoscape-graphml.js"></script>
    <script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-spread/1.0.9/cytoscape-spread.js"></script>


    <link href="https://fonts.googleapis.com/css?family=Metrophobic" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link href="assets/css/styles.css" rel="stylesheet" />
</head>

<body>
    <div id="title">The Trump World</div>
    <div id="cy"></div>


    <script type="text/javascript">
        $(function() {

            "use strict";
            var graphP = $.ajax({
                url: 'http://localhost:8888/DataScience/209/W209-Project-TrumpWorld/src/assets/data/trumpworld.graphml',
                type: 'GET',
                dataType: 'text'
            });
            // also get style via ajax
            var styleP = $.ajax({
                url: 'http://localhost:8888/DataScience/209/W209-Project-TrumpWorld/src/assets/cose-layout-styles.txt',
                type: 'GET',
                dataType: 'text'
            });

            var layoutOptions = {
                name: 'grid',

                fit: true, // whether to fit the viewport to the graph
                padding: 30, // padding used on fit
                boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }
                avoidOverlap: true, // prevents node overlap, may overflow boundingBox if not enough space
                avoidOverlapPadding: 10, // extra spacing around nodes when avoidOverlap: true
                condense: false, // uses all available space on false, uses minimal space on true
                rows: 60, // force num of rows in the grid
                cols: 30, // force num of columns in the grid
                position: function(node) {}, // returns { row, col } for element
                sort: undefined, // a sorting function to order the nodes; e.g. function(a, b){ return a.data('weight') - b.data('weight') }
                animate: false, // whether to transition the node positions
                animationDuration: 500, // duration of animation in ms if enabled
                animationEasing: undefined, // easing of animation if enabled
                ready: undefined, // callback on layoutready
                stop: undefined // callback on layoutstop
            }
            // when both graph export json and style loaded, init cy
            Promise.all([graphP, styleP]).then(initCy);

            function initCy(then) {
                var styleJson = then[1];
                //var elements = getCyElementsForTest();

                var cy = window.cy = cytoscape({
                    container: document.getElementById('cy'),
                    style: styleJson,
                    boxSelectionEnabled: false,
                    autounselectify: true,
                    ready: function() {
                        this.graphml(then[0]);
                        this.layout(layoutOptions);
                    }

                });

            }

        });

    </script>
</body>

</html>
