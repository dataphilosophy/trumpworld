<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">

    <title>Trump World</title>
    <script type="text/javascript" src="assets/js/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/cytoscape/dist/cytoscape.min.js"></script>
    <!--    <script type="text/javascript" src="assets/js/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"></script>-->
    <script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-cose-bilkent/1.0.5/cytoscape-cose-bilkent.js"></script>
    <script type="text/javascript" src="assets/js/cytoscape-graphml/cytoscape-graphml.js"></script>



    <link href="https://fonts.googleapis.com/css?family=Metrophobic" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link href="assets/css/styles.css" rel="stylesheet" />


</head>

<body>
    <div id="title">The Trump World</div>
    <div id="cy"></div>


    <script type="text/javascript">
        $(function() {

            "use strict";
            var graphP = $.ajax({
                url: 'http://localhost:8888/DataScience/209/W209-Project-TrumpWorld/src/assets/data/trumpworld.graphml',
                type: 'GET',
                dataType: 'text'
            });
            // also get style via ajax
            var styleP = $.ajax({
                url: 'http://localhost:8888/DataScience/209/W209-Project-TrumpWorld/src/assets/cose-layout-styles.txt',
                type: 'GET',
                dataType: 'text'
            });

            var layoutOptions = {
                name: 'cose',
                // Called on `layoutready`
                ready: function() {},

                // Called on `layoutstop`
                stop: function() {},

                // Whether to animate while running the layout
                animate: true,

                // The layout animates only after this many milliseconds
                // (prevents flashing on fast runs)
                animationThreshold: 250,

                // Number of iterations between consecutive screen positions update
                // (0 -> only updated on the end)
                refresh: 20,

                // Whether to fit the network view after when done
                fit: false,

                // Padding on fit
                padding: 30,

                // Constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }
                boundingBox: undefined,

                // Randomize the initial positions of the nodes (true) or use existing positions (false)
                randomize: true,

                // Extra spacing between components in non-compound graphs
                componentSpacing: 100,

                // Node repulsion (non overlapping) multiplier
                nodeRepulsion: function(node) {
                    return 400000;
                },

                // Node repulsion (overlapping) multiplier
                nodeOverlap: 10,

                // Ideal edge (non nested) length
                idealEdgeLength: function(edge) {
                    return 30;
                },

                // Divisor to compute edge forces
                edgeElasticity: function(edge) {
                    return 100;
                },

                // Nesting factor (multiplier) to compute ideal edge length for nested edges
                nestingFactor: 5,

                // Gravity force (constant)
                gravity: 80,

                // Maximum number of iterations to perform
                numIter: 1000,

                // Initial temperature (maximum node displacement)
                initialTemp: 200,

                // Cooling factor (how the temperature is reduced between consecutive iterations
                coolingFactor: 0.95,

                // Lower temperature threshold (below this point the layout will end)
                minTemp: 1.0,

                // Whether to use threading to speed up the layout
                useMultitasking: true
            }
            // when both graph export json and style loaded, init cy
            Promise.all([graphP, styleP]).then(initCy);

            function initCy(then) {
                var styleJson = then[1];
                var cy = window.cy = cytoscape({
                    container: document.getElementById('cy'),
                    style: styleJson,
                    boxSelectionEnabled: false,
                    autounselectify: true,
                    ready: function() {
                        this.graphml(then[0]);
                        this.layout(layoutOptions);
                    }

                });

            }

        });

    </script>
</body>

</html>
